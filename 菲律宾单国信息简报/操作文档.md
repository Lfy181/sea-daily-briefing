 建议的执行步骤

  1. 先检查Python环境

  # 检查Python版本
  python3 --version

  # 检查pip版本
  pip3 --version

  # 检查系统是否已有uv
  which uv

  2. 安装uv（如果未安装）

  # 使用官方安装脚本
  curl -LsSf https://astral.sh/uv/install.sh | sh

  # 或从pip安装
  pip3 install uv

  # 安装后刷新环境变量
  source ~/.bashrc
  # 或
  export PATH="$HOME/.cargo/bin:$PATH"

  3. 使用uv创建虚拟环境并安装依赖

  cd /opt/philippines-briefing/菲律宾单国信息简报

  # 创建虚拟环境（在项目目录下）
  uv venv

  # 激活虚拟环境
  source .venv/bin/activate

  # 使用uv安装依赖（比pip快很多）
  uv pip install -r requirements.txt

  4. 测试运行（在虚拟环境中）

  # 确保虚拟环境已激活
  source .venv/bin/activate

  # 运行测试
  python3 main.py

  5. 配置crontab时使用虚拟环境

  # 编辑crontab
  crontab -e

  # 添加行（使用虚拟环境的Python）
  0 0 * * * cd /opt/philippines-briefing/菲律宾单国信息简报 &&
  source .venv/bin/activate &&
  /opt/philippines-briefing/菲律宾单国信息简报/.venv/bin/python
  main.py >> /var/log/daily-briefing/briefing.log 2>&1

  ---
  请先在VSCode终端执行第1步，检查Python环境，然后告诉我结果，我
  再协助你安装uv。


    2. 进入项目目录并安装依赖

  cd /opt/philippines-briefing/菲律宾单国信息简报

  # 安装Python依赖
  pip3 install -r requirements.txt

  3. 确保机器人已入群（关键步骤）

  在钉钉手机APP中：
  - 把"菲每日简报"机器人拉入"简报信息"群（群号161775015441）

  4. 获取群的open_conversation_id

  cd /opt/philippines-briefing/菲律宾单国信息简报

  python3 get_group_id.py 161775015441

  按提示输入群名称，成功后会保存到 groups.json

  5. 手动测试运行

  python3 main.py

  检查终端输出，确认：
  - 天气数据获取成功
  - 汇率获取成功
  - 消息发送成功

  6. 配置定时任务（crontab）

  # 编辑crontab
  crontab -e

  # 添加以下行（每天UTC 00:00运行，即北京时间8:00）
  0 0 * * * cd /opt/philippines-briefing/菲律宾单国信息简报 &&
  /usr/bin/python3 main.py >>
  /var/log/daily-briefing/briefing.log 2>&1
